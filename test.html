<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Resilient Swarm Test</title>
    <script src="bundle.js"></script>

    <script>
      console.log("in script.")

      let node1 = new Swarm('http://localhost:6688')
      let node2 = new Swarm('http://localhost:6688')
      let node3 = new Swarm('http://localhost:6688')

      var delayed = false
      node1.rpc.ping = cb => {
        if (!delayed) setTimeout(() => cb(null), 3000)
        else cb(null)
        delayed = true
      }

      // node1.on('peer', peer => console.log('peer1 got', peer.publicKey))
      // node2.on('peer', peer => console.log('peer2 got', peer.publicKey))
      // node3.on('peer', peer => console.log('peer3 got', peer.publicKey))

      node1.call(node2.publicKey)
      node3.call(node1.publicKey)

      window.nodes = [node1, node2, node3]
    </script>
  </head>
  <body>

  </body>
</html>